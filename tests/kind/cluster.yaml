# Kind cluster configuration for Materialize integration tests
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
name: mz-test
nodes:
  - role: control-plane
    image: kindest/node:v1.31.0
    kubeadmConfigPatches:
      - |
        kind: InitConfiguration
        nodeRegistration:
          kubeletExtraArgs:
            node-labels: "materialize.cloud/swap=true,materialize.cloud/disk=true,materialize.cloud/availability-zone=kind"
    extraPortMappings:
      # PostgreSQL
      - containerPort: 30432
        hostPort: 30432
      # MinIO API
      - containerPort: 30900
        hostPort: 30900
      # Materialize SQL
      - containerPort: 30875
        hostPort: 30875
      # Materialize HTTP
      - containerPort: 30876
        hostPort: 30876
